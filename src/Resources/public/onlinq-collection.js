!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return s(t,arguments,h(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),d(o,t)})(t)}function s(t,e,n){return(s=f()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&d(r,n.prototype),r}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function y(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function v(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}var b=new WeakMap,m=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,A=new WeakSet,k=new WeakSet,E=new WeakSet,x=new WeakSet,O=new WeakSet,M=new WeakSet,j=new WeakSet,_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(s,t);var e,n,o,r,i,u=(e=s,n=f(),function(){var t,o=h(e);if(n){var r=h(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return a(this,t)});function s(){var t,e,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t=u.call(this),j.add(c(t)),M.add(c(t)),O.add(c(t)),x.add(c(t)),E.add(c(t)),k.add(c(t)),A.add(c(t)),e=c(t),o=!1,(n="nextIndex")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,b.set(c(t),{writable:!0,value:null}),m.set(c(t),{writable:!0,value:null}),w.set(c(t),{writable:!0,value:null}),g.set(c(t),{writable:!0,value:null}),S.set(c(t),{writable:!0,value:null}),t.attachShadow({mode:"open"}),v(c(t),S,C.bind(c(t))),t}return o=s,(r=[{key:"connectedCallback",value:function(){y(this,j,D).call(this),y(this,O,P).call(this),y(this,k,R).call(this)}},{key:"disconnectedCallback",value:function(){y(this,M,L).call(this)}},{key:"entry",value:function(t){return this.entries.find((function(e){return e.index===t.toString()}))}},{key:"addEntry",value:function(){if(this.allowAdd&&this.prototype){var t=this.nextIndex++,e=this.prototype.cloneNode(!0),n=document.createElement("onlinq-collection-entry");n.appendChild(e),n.collection=this,n.index=t,this.appendChild(n),y(this,E,W).call(this)}}},{key:"deleteEntry",value:function(t){this.allowDelete&&(this.entry(t).remove(),this.entries.forEach((function(e){e.index<t||(e.index=e.index-1)})),this.nextIndex--,0===this.entries.length&&y(this,x,T).call(this))}},{key:"moveEntry",value:function(t,e){var n=this.entry(t),o=this.entry(e);n&&o&&(o.index="__swap__",n.index=e,o.index=t,e>t?this.insertBefore(o,n):this.insertBefore(n,o))}},{key:"name",get:function(){var t;return null!==(t=this.getAttribute("name"))&&void 0!==t?t:null},set:function(t){this.setAttribute("name",t)}},{key:"entries",get:function(){return Array.from(this.querySelectorAll(":scope > onlinq-collection-entry"))}},{key:"allowAdd",get:function(){return this.hasAttribute("allow-add")},set:function(t){t?this.setAttribute("allow-add","allow-add"):this.removeAttribute("allow-add")}},{key:"allowDelete",get:function(){return this.hasAttribute("allow-delete")},set:function(t){t?this.setAttribute("allow-delete","allow-delete"):this.removeAttribute("allow-delete")}},{key:"allowMove",get:function(){return this.hasAttribute("allow-move")},set:function(t){t?this.setAttribute("allow-move","allow-move"):this.removeAttribute("allow-move")}},{key:"prefix",get:function(){var t;return null!==(t=this.getAttribute("prefix"))&&void 0!==t?t:null},set:function(t){this.setAttribute("prefix",t)}},{key:"prototype",get:function(){var t,e,n=null;return this.name&&(n=this.querySelector('template[collection="'.concat(this.name,'"][collection-prototype]'))),n||(n=this.querySelector("template[collection-prototype]")),null!==(t=null===(e=n)||void 0===e?void 0:e.content)&&void 0!==t&&t}},{key:"prototypeName",get:function(){return this.hasAttribute("prototype-name")?this.getAttribute("prototype-name"):"__name__"},set:function(t){this.setAttribute("prototype-name",t)}}])&&l(o.prototype,r),i&&l(o,i),s}(u(HTMLElement)),q=function(){var t=this;return[].concat(r(Array.from(this.shadowRoot.querySelectorAll("[collection-add]"))),r(Array.from(this.querySelectorAll("[collection-add]")))).filter((function(e){var n=e.getAttribute("collection");return!n||n===t.name}))},R=function(){this.nextIndex=this.entries.length},W=function(){p(this,b).style.display="block",p(this,m).style.display="none"},T=function(){p(this,b).style.display="none",p(this,m).style.display="block"},P=function(){var t=this;this.allowAdd&&y(this,A,q).call(this).forEach((function(e){e.addEventListener("click",p(t,S))}))},L=function(){var t=this;this.allowAdd&&y(this,A,q).call(this).forEach((function(e){e.removeEventListener("click",p(t,S))}))},D=function(){this.shadowRoot.innerHTML='<style type="text/css">\n  [data-collection],\n  [data-add] {\n    display: none;\n  }\n</style>\n<div data-collection>\n  <slot></slot>\n</div>\n<div data-placeholder>\n  <slot name="placeholder">\n    <p>No entries</p>\n  </slot>\n</div>\n<div data-actions>\n  <slot name="actions">\n    <span data-add>\n      <slot name="add">\n        <button collection-add>Add</button>\n      </slot>\n    </span>\n  </slot>\n</div>\n',v(this,b,this.shadowRoot.querySelector("[data-collection]")),v(this,m,this.shadowRoot.querySelector("[data-placeholder]")),v(this,w,this.shadowRoot.querySelector("[data-actions]")),v(this,g,this.shadowRoot.querySelector("[data-add]")),this.entries.length>0&&y(this,E,W).call(this),this.allowAdd&&(p(this,g).style.display="inline")};function C(){this.addEntry()}customElements.define("onlinq-collection",_);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function F(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function U(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?B(t):e}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){var e="function"==typeof Map?new Map:void 0;return($=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return z(t,arguments,K(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),J(o,t)})(t)}function z(t,e,n){return(z=G()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&J(r,n.prototype),r}).apply(null,arguments)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function V(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function X(t,e,n){var o=e.get(t);if(!o)throw new TypeError("attempted to set private field on non-instance");if(o.set)o.set.call(t,n);else{if(!o.writable)throw new TypeError("attempted to set read only private field");o.value=n}return n}var Y=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,ot=new WeakMap,rt=new WeakMap,it=new WeakMap,lt=new WeakSet,at=new WeakSet,ct=new WeakSet,ut=new WeakSet,st=new WeakSet,ft=new WeakSet,dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(a,t);var e,n,o,r,i,l=(e=a,n=G(),function(){var t,o=K(e);if(n){var r=K(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return U(this,t)});function a(){var t,e,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),t=l.call(this),ft.add(B(t)),st.add(B(t)),ut.add(B(t)),ct.add(B(t)),at.add(B(t)),lt.add(B(t)),e=B(t),o=null,(n="collection")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,Y.set(B(t),{writable:!0,value:null}),Z.set(B(t),{writable:!0,value:null}),tt.set(B(t),{writable:!0,value:null}),et.set(B(t),{writable:!0,value:null}),nt.set(B(t),{writable:!0,value:null}),ot.set(B(t),{writable:!0,value:null}),rt.set(B(t),{writable:!0,value:null}),it.set(B(t),{writable:!0,value:null}),t.attachShadow({mode:"open"}),X(B(t),ot,wt.bind(B(t))),X(B(t),rt,gt.bind(B(t))),X(B(t),it,St.bind(B(t))),t}return o=a,(r=[{key:"connectedCallback",value:function(){this.collection||(this.collection=this.collectionName?this.closest('onlinq-collection[name="'.concat(this.collectionName,'"]')):this.closest("onlinq-collection")),V(this,ft,mt).call(this),V(this,ut,vt).call(this)}},{key:"disconnectedCallback",value:function(){V(this,st,bt).call(this)}},{key:"deleteEntry",value:function(){this.collection.deleteEntry(this.index)}},{key:"moveDown",value:function(){this.collection.moveEntry(+this.index,+this.index+1)}},{key:"moveUp",value:function(){this.collection.moveEntry(+this.index,+this.index-1)}},{key:"collectionName",get:function(){var t;return null!==(t=this.getAttribute("collection"))&&void 0!==t?t:null}},{key:"index",get:function(){var t;return null!==(t=this.getAttribute("collection-index"))&&void 0!==t&&t},set:function(t){var e=this.index||this.collection.prototypeName;this.setAttribute("collection-index",t.toString());var n=this.querySelector("[collection-label]");n&&(n.innerHTML=t);var o=this.collection.getAttribute("id"),r=this.collection.prefix;o&&At(this.querySelectorAll("*"),"".concat(o,"_").concat(e),"".concat(o,"_").concat(t)),r&&At(this.querySelectorAll("*"),"".concat(r,"[").concat(e,"]"),"".concat(r,"[").concat(t,"]\n      "))}}])&&F(o.prototype,r),i&&F(o,i),a}($(HTMLElement)),ht=function(){var t=this;return[].concat(N(Array.from(this.shadowRoot.querySelectorAll("[collection-delete]"))),N(Array.from(this.querySelectorAll("[collection-delete]")))).filter((function(e){var n=e.getAttribute("collection");return!n||n===t.collectionName}))},pt=function(){var t=this;return[].concat(N(Array.from(this.shadowRoot.querySelectorAll("[collection-move-down]"))),N(Array.from(this.querySelectorAll("[collection-move-down]")))).filter((function(e){var n=e.getAttribute("collection");return!n||n===t.collectionName}))},yt=function(){var t=this;return[].concat(N(Array.from(this.shadowRoot.querySelectorAll("[collection-move-up]"))),N(Array.from(this.querySelectorAll("[collection-move-up]")))).filter((function(e){var n=e.getAttribute("collection");return!n||n===t.collectionName}))},vt=function(){var t=this;V(this,at,pt).call(this).forEach((function(e){e.addEventListener("click",Q(t,rt))})),V(this,ct,yt).call(this).forEach((function(e){e.addEventListener("click",Q(t,it))})),V(this,lt,ht).call(this).forEach((function(e){e.addEventListener("click",Q(t,ot))}))},bt=function(){var t=this;V(this,at,pt).call(this).forEach((function(e){e.removeEventListener("click",Q(t,rt))})),V(this,ct,yt).call(this).forEach((function(e){e.removeEventListener("click",Q(t,it))})),V(this,lt,ht).call(this).forEach((function(e){e.removeEventListener("click",Q(t,ot))}))},mt=function(){this.shadowRoot.innerHTML='<style type="text/css">\n  [data-move-up],\n  [data-move-down],\n  [data-delete] {\n    display: none;\n  }\n</style>\n<div data-entry>\n  <slot></slot>\n</div>\n<div data-actions>\n  <slot name="actions">\n    <span data-move-up>\n      <slot name="move-up">\n        <button collection-move-up>Move up</button>\n      </slot>\n    </span>\n    <span data-move-down>\n      <slot name="move-down">\n        <button collection-move-down>Move down</button>\n      </slot>\n    </span>\n    <span data-delete>\n      <slot name="delete">\n        <button collection-delete>Delete</button>\n      </slot>\n    </span>\n  </slot>\n</div>\n',X(this,Y,this.shadowRoot.querySelector("[data-entry]")),X(this,Z,this.shadowRoot.querySelector("[data-actions]")),X(this,tt,this.shadowRoot.querySelector("[data-delete]")),X(this,et,this.shadowRoot.querySelector("[data-move-down]")),X(this,nt,this.shadowRoot.querySelector("[data-move-up]")),this.collection&&(this.collection.allowMove&&(Q(this,nt).style.display="inline",Q(this,et).style.display="inline"),this.collection.allowDelete&&(Q(this,tt).style.display="inline"))};function wt(){this.collection.allowDelete&&this.deleteEntry()}function gt(){this.collection.allowMove&&this.moveDown()}function St(){this.collection.allowMove&&this.moveUp()}function At(t,e,n){t.forEach((function(t){N(t.attributes).map((function(t){t.value.includes(e)&&(t.value=t.value.replace(e,n))}))}))}customElements.define("onlinq-collection-entry",dt)}]);